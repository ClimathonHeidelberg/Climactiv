!function(e){function t(t){var i=jQuery(t.target).attr("data-filter-key");i||(i=e("#oc_theme_filter").find(".oc-active-filter").attr("data-filter-key"));var r,s,d=e(".pagination-item.current").attr("data-request_page"),l=e(".theme-browser").attr("data-item_count"),c=null,h=Math.ceil(e("#theme-browser-page-1 ."+i).length/l);"oc_theme_filter"===e(t.target).parent().attr("id")&&(d=1,a(h),e(".oc-active-filter").removeClass("oc-active-filter"),e(t.target).addClass("oc-active-filter")),n(e(".all")),"all"!==i?(n(jQuery(".one-theme").not(jQuery("."+i))),h>1?(r=(d-1)*l,s=d*l,c=e("."+i).slice(r,s)):c=e("."+i),o(jQuery(c))):o(e(".page-"+d))}function a(t){e(".theme-browser-pagination .current").removeClass("current"),e(".theme-browser-pagination .first").addClass("current"),e(".theme-browser-pagination a").hide(),t>1&&e(".theme-browser-pagination a").slice(0,t).show()}function o(t){e(t).removeClass("hidden_theme"),e(".theme-browser-page").hide(),e(".theme-browser-page-filtered").show().append(e(t).clone())}function n(t){e(".theme-browser-page-filtered").find(t).remove()}function i(e){for(var t=window.location.search.substring(1),a=t.split("&"),o=0;o<a.length;o++){var n=a[o].split("=");if(n[0]==e)return n[1]}return!1}function r(){TB_WIDTH=75*e(window).width()/100,TB_HEIGHT=85*e(window).height()/100,e("#TB_window").css({marginLeft:"-"+parseInt(TB_WIDTH/2,10)+"px",width:TB_WIDTH+"px"}),e("#TB_window").css({marginTop:"-"+parseInt(TB_HEIGHT/2,10)+"px",height:TB_HEIGHT+"px"})}e(document).ready(function(){screenshotPreview(),e(".onecom-move-up").length>0&&e(".onecom-move-up").click(function(){return e("html, body").animate({scrollTop:0},"slow"),!1}),e(document).on("click",".one-install, .one-installed",function(){var t=e(this),a=e(this).parents(".one-theme:first");e(a).addClass("active");var o=e(this).attr("data-name"),n=e(this).attr("data-theme_slug"),i=e(this).attr("data-redirect"),r=onecom_vars.network;if(void 0!==o&&""!=o){void 0===r&&(r=!1);var s={action:o,theme_slug:n,redirect:i,network:r};e(a).addClass("active"),e(".loading-overlay.fullscreen-loader").addClass("show"),e.post(ajaxurl,s,function(o){var n=e.parseJSON(o);if(console.log(n),void 0!==n.type&&"redirect"==n.type)window.location=n.url;else{e(".onecom-notifier").html(n.message).attr("type",n.type).addClass("show");var i=5e3;"success"==n.type&&(e(a).addClass("installed"),e(t).removeClass("one-install").addClass("one-installed"),e(t).find(".action-text").remove(),e(t).find("> span").append(n.button_html),e(t).attr("data-name","onecom_activate_theme"),i=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay.fullscreen-loader").removeClass("show")},i)}})}}),e(document).on("click",".install-now, .activate-plugin-ajax",function(t){t.preventDefault();var a=e(this),o=e(this).parents(".one-plugin-card:first"),n=e(this).attr("data-download_url"),i=e(this).attr("data-slug"),r=e(this).attr("data-name"),s=e(this).attr("data-action"),d=e(this).attr("data-redirect"),l=void 0!==e(this).attr("data-plugin_type")?e(this).attr("data-plugin_type"):"";e(".loading-overlay.fullscreen-loader").addClass("show");var c={action:s,plugin_slug:i,plugin_name:r,download_url:n,plugin_type:l,redirect:d};e.post(ajaxurl,c,function(t){var n=e.parseJSON(t);if(console.log(n),void 0!==n.type&&"redirect"==n.type)window.location=n.url;else{e(".onecom-notifier").html(n.message).attr("type",n.type).addClass("show");var i=5e3;"success"==n.type&&(e(o).addClass("activate"),e(a).after(n.button_html),e(a).remove(),i=1500),setTimeout(function(){e(".onecom-notifier").removeClass("show"),e(".loading-overlay.fullscreen-loader").removeClass("show")},i)}})}),e(".pagination-item").click(function(a){a.preventDefault(),e(this).is(".current")||(e(".pagination-item").removeClass("current"),e(this).addClass("current"),t(a))});var a=e("#one-confirmation"),o=a.attr("data-yes_string"),n=a.attr("data-no_string");a.dialog({dialogClass:"wp-dialog wp-one-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,width:"25%",hide:{effect:"explode",duration:1e3},resizable:!1,buttons:[{text:n,class:"button",click:function(){e(this).dialog("close")}},{text:o,class:"button button-primary",click:function(){var t=e(this).data("element"),a=e(t).parents("form:first");e(a)[0].submit(),e(this).dialog("close")}}]}),e(".one-deactivate-plugin").click(function(e){e.preventDefault(),a.data("element",this).dialog("open")}),e(".discouraged-modal-close").click(function(){e("#one-confirmation").dialog("close")}),e(".one-theme").hover(function(){e(this).addClass("active")},function(){e(this).removeClass("active")}),e("#oc_theme_filter li").click(function(e){t(e)}),e("#oc_theme_filter_select").change(function(t){var a=e(this).val(),o=e('li[data-filter-key="'+a+'"]').text();e('li[data-filter-key="'+a+'"]').trigger("click"),e(".oc_select_wrapper span").text(o)})}),e(window).scroll(function(){onecom_move_up_toggle()}),e(window).load(function(){onecom_move_up_toggle()}),window.onpopstate=function(t){if(void 0!==t&&null!=t.state)var a=t.state.paged;else{var a=i("paged");void 0!==a&&""!=a&&null!=a||(a=1)}e(".pagination-item").each(function(t,o){if(e(o).attr("data-request_page")==a)return void e(o).trigger("click")})},this.screenshotPreview=function(){xOffset=10,yOffset=30,e(".one-screenshot").hover(function(t){this.t=this.title,this.title="";var a=""!=this.t?"<br/>"+this.t:"";e("body").append("<p id='one-screenshot'><img src='"+e(this).attr("data-preview")+"' alt='url preview' />"+a+"</p>"),e("#screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px").fadeIn("fast")},function(){this.title=this.t,e("#one-screenshot").remove()}),e(".one-screenshot").mousemove(function(t){e("#one-screenshot").css("top",t.pageY-xOffset+"px").css("left",t.pageX+yOffset+"px")})},e(window).on("resize",r),e(document).on("thickbox:iframe:loaded",function(t){r(),e("#TB_iframeContent").contents().find("head").append(e("<style type='text/css'> .plugin-install-php #plugin-information-footer {display:none !important;} </style>"))}),e(document).on("click",".preview_link",function(){var t=e(this).parents(".one-theme:first"),a=e(".theme-browser > div.one-theme").length,o=e(this).attr("data-demo-url");e("iframe").attr("src",o);var n=e(this).attr("data-id"),i=e(this).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .next").attr("data-demo-id",i);var r=e(this).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(".header_btn_bar .previous").attr("data-demo-id",r),e(".header_btn_bar .theme-info").attr("data-theme-count",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",n),e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",n),e(".header_btn_bar .next").removeAttr("style"),e(".header_btn_bar .previous").removeAttr("style");var s=e(this).attr("data-id");0===e("#demo-"+s).closest(".one-theme").prev(".one-theme").length&&(e(".header_btn_bar .previous").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .previous").attr("data-demo-id","0"));var s=e(this).attr("data-id");0===e("#demo-"+s).closest(".one-theme").next(".one-theme").length&&(e(".header_btn_bar .next").css({opacity:"0.5",cursor:"initial"}),e(".header_btn_bar .next").attr("data-demo-id","0")),e(t).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show(),tb_show("Preview Popup","#TB_inline?width=full&height=full&inlineId=thickbox_preview&modal=true&class=thickbox",null),e("body").addClass("preview_page")}),e(document).on("click",".close_btn",function(){tb_remove(),setTimeout(function(){e("body").removeClass("preview_page")},500)}),e(document).on("click",".one-dialog-close",function(){tb_remove()}),e(document).on("click",".preview-install-button",function(){var t=e(this).attr("data-active-demo-id"),a=null;e(".one-theme").each(function(o,n){if(e(n).find(".preview_link").attr("data-id")===t)return a=n,!1}),null!=a&&(e("html, body").stop().animate({scrollTop:e(a).offset().top-64},300),e(".close_btn").trigger("click"),e(a).find(".one-install").trigger("click"))}),e(document).on("click","#desktop",function(){e(".preview-container .phone-content").removeClass("phone-content").addClass("desktop-content"),e(".preview-container .preview span").remove(".screen-rotate"),e(".preview-container").removeClass("scroll"),e(".preview-container iframe").removeClass("horizontal"),e(".desktop-content").removeClass("horizontal"),e("#desktop").addClass("current"),e("#mobile").removeClass("current")}),e(document).on("click","#mobile",function(){e(".preview-container .desktop-content").removeClass("desktop-content").addClass("phone-content"),e(".preview-container").addClass("scroll"),e(".preview-container .preview").append('<span class="screen-rotate"></span>'),e("#desktop").removeClass("current"),e("#mobile").addClass("current")}),e(document).on("click",".screen-rotate",function(){e(".preview-container iframe").toggleClass("horizontal"),e(".phone-content").toggleClass("horizontal")}),e(document).on("click",".header_btn_bar .next",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),o=e("#demo-"+t).closest(".one-theme").next(".one-theme").length;if(e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",t),"0"===t)event.stopPropagation();else if(0===o){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .previous").attr("data-demo-id",a);var n=e("#demo-"+t).attr("data-demo-url"),i=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",n),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .previous").removeAttr("style");var n=e("#demo-"+t).attr("data-demo-url"),i=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",n);var r=e("#demo-"+t).closest(".one-theme").next(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",r),e(".header_btn_bar .previous").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}e(i).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show()}),e(document).on("click",".header_btn_bar .previous",function(){var t=e(this).attr("data-demo-id"),a=e("#preview_box .theme-info").attr("data-active-demo-id"),o=e("#demo-"+t).closest(".one-theme").prev(".one-theme").length;if(e(".header_btn_bar .preview-install-button").attr("data-active-demo-id",t),"0"===t)event.stopPropagation();else if(0===o){e(this).css({opacity:"0.5",cursor:"initial"}),e(this).attr("data-demo-id",0),e(".header_btn_bar .next").attr("data-demo-id",a);var n=e("#demo-"+t).attr("data-demo-url"),i=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",n),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}else{e(".header_btn_bar .next").removeAttr("style");var n=e("#demo-"+t).attr("data-demo-url"),i=e("#demo-"+t).parents(".one-theme:first");e("iframe").attr("src",n);var r=e("#demo-"+t).closest(".one-theme").prev(".one-theme").find(".preview_link").attr("data-id");e(this).attr("data-demo-id",r),e(".header_btn_bar .next").attr("data-demo-id",a),e(".header_btn_bar .theme-info").attr("data-active-demo-id",t)}e(i).hasClass("installed")?e(".header_btn_bar").find(".preview-install-button").hide():e(".header_btn_bar").find(".preview-install-button").show()}),this.onecom_move_up_toggle=function(){if(0==e(".onecom-move-up").length)return!1;e(window).height()/2<=e(window).scrollTop()?e(".onecom-move-up").addClass("show"):e(".onecom-move-up").removeClass("show")}}(jQuery);