function oc_cb_validate_form(){var e=!1;jQuery("#oc_cb_errors").removeClass("show"),jQuery(".oc_cb_spinner").removeClass("success").removeClass("is-active");var r="#banner_text",s=jQuery(r).attr("maxlength");jQuery("#occb_rem").html(jQuery(r).val().length+" / "+s),0==jQuery(r).val().length?(jQuery(r).addClass("occberror"),e=!0):jQuery(r).val().length>=490?(jQuery("#occb_rem").css("display","inline-block"),jQuery(r).removeClass("maxlimit")):(jQuery("#occb_rem").css("display","none"),jQuery(r).removeClass("occberror"),jQuery(r).removeClass("maxlimit"));jQuery("#policy_link_text:visible").length&&0==jQuery("#policy_link_text").val().length?(jQuery("#policy_link_text").addClass("occberror"),e=!0):jQuery("#policy_link_text").removeClass("occberror");var o=new RegExp("(https?://(?:www.|(?!www))[a-zA-Z0-9-]+[a-zA-Z0-9-].[^s]{2,}|https?://(?:www.|(?!www))[a-zA-Z0-9].[^s]{2,}|www.[a-zA-Z0-9].[^s]{2,})");!jQuery("#policy_link_url:visible").length||0!=jQuery("#policy_link_url").val().length&&0!=o.test(jQuery("#policy_link_url").val())?jQuery("#policy_link_url").removeClass("occberror"):(jQuery("#policy_link_url").addClass("occberror"),e=!0);return jQuery("#button_text").val().length?jQuery("#button_text").removeClass("occberror"):(jQuery("#button_text").addClass("occberror"),e=!0),e&&jQuery("#cb_enable:checked").length?(jQuery("#oc_cb_btn").attr("disabled","disabled"),!1):(jQuery("#oc_cb_btn").removeAttr("disabled"),!0)}!function(e){jQuery(document).on("change","#cb_enable",function(){jQuery(this).prop("checked")?jQuery(".fieldset.cb_fields").removeClass("show").addClass("show"):jQuery(".fieldset.cb_fields").removeClass("show")}),jQuery(document).on("change","#toggle_policy",function(){jQuery(this).prop("checked")?jQuery(".fieldset.policy_fields").removeClass("show").addClass("show"):jQuery(".fieldset.policy_fields").removeClass("show")}),jQuery(document).on("input","#oc_cb_config_form input, #oc_cb_config_form textarea",function(){setTimeout(function(){oc_cb_validate_form()},200)}),jQuery(document).on("click","#oc_cb_config_form input, #oc_cb_config_form textarea",function(e){var r,s;if(r=jQuery('input[name="banner_style"]:checked').val(),!jQuery('input[name="show"]:checked').val())return jQuery("#banner_preview").removeClass(),!0;switch(element=jQuery(this).attr("name"),element){case"banner_style":r=jQuery(this).val(),s="fill_"+r;break;case"banner_text":s="text_"+r;break;case"policy_link":case"policy_link_text":case"policy_link_url":s="link_"+r;break;case"button_text":s="button_"+r;break;default:s="fill_"+r}jQuery("#banner_preview").removeClass(),jQuery("#banner_preview").addClass(s)}),jQuery(document).on("submit","#oc_cb_config_form",function(e){if(e.preventDefault(),!oc_cb_validate_form())return!1;jQuery("#oc_cb_errors").removeClass("show"),jQuery(".oc_cb_spinner").removeClass("success").addClass("is-active");var r=jQuery("#oc_cb_config_form").serialize(),s={action:"oc_cb_settings",oc_cb_sec:oc_constants.oc_cb_token,settings:r};return jQuery.ajax({url:ajaxurl,type:"POST",data:s,dataType:"JSON",error:function(e,r,s){console.log(e.status+" "+e.statusText+"---"+r),jQuery("#oc_cb_errors").html("").html("Failed to save settings. Please reload the page and try again.").addClass("show"),jQuery(".oc_cb_spinner").removeClass("is-active").removeClass("success").addClass("error")},success:function(e){if(e.error)return jQuery(".oc_cb_spinner").removeClass("is-active").removeClass("success").addClass("error"),!1;jQuery(".oc_cb_spinner").removeClass("is-active").addClass("success")},statusCode:{200:function(){},404:function(){jQuery("#oc_cb_errors").html("").html("Failed to save settings. Please reload the page and try again.").addClass("show")},500:function(){jQuery("#oc_cb_errors").html("").html("Something went wrong; internal server error while processing the request!").addClass("show")}}}),!1}),jQuery(document).on("click","#oc_cb_btn",function(e){jQuery("#oc_cb_config_form").submit()})}(jQuery);